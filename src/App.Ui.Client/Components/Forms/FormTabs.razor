@if (Tabs.Count > 0)
{
    <div class="flex gap-2 border-b border-slate-200 py-2">
        @for (var index = 0; index < Tabs.Count; index++)
        {
            var tabIndex = index;
            var isActive = tabIndex == ActiveTab;
            <button type="button"
                    class="rounded-md px-3 py-1.5 text-sm font-medium transition @(isActive ? "bg-slate-900 text-white shadow-sm" : "text-slate-600 hover:bg-slate-100")"
                    @onclick="() => SetTabAsync(tabIndex)">
                @(Tabs[tabIndex])
            </button>
        }

        @if (ShowStepIndicator)
        {
            <div class="flex w-full justify-end">
                <span class="text-xs text-slate-500">Step @(ActiveTab + 1) of @Tabs.Count</span>
            </div>
        }
    </div>
}

@code {
    [Parameter] public IReadOnlyList<string> Tabs { get; set; } = Array.Empty<string>();
    [Parameter] public int ActiveTab { get; set; }
    [Parameter] public EventCallback<int> ActiveTabChanged { get; set; }
    [Parameter] public bool ShowStepIndicator { get; set; } = true;

    private async Task SetTabAsync(int index)
    {
        if (index < 0 || index >= Tabs.Count)
        {
            return;
        }

        if (index == ActiveTab)
        {
            return;
        }

        if (ActiveTabChanged.HasDelegate)
        {
            await ActiveTabChanged.InvokeAsync(index);
        }
    }
}
